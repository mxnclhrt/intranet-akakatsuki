<!DOCTYPE html>
<html lang="fr">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Connexion Intranet</title>
	<link rel="icon" type="image/png" href="../img/Akatsuki-Logo.svg"/>
	<link rel="stylesheet" href="../css/style.css">
	<!-- <link rel="stylesheet" href="../css/style-login.css"> -->
</head>

<body>
<div class="login-box">
	<h2>Connexion</h2>
	<label for="user">Identifiant</label>
	<input type="text" id="user" autocomplete="username" />
	<label for="pwd">Mot de passe</label>
	<input type="password" id="pwd" autocomplete="current-password" />
	<button id="submit">Se connecter</button>
	<p id="msg" class="error"></p>
</div>

<script>
	const ALLOWED_LOGIN = "akakatsuki";
	const ALLOWED_PASSWORD = "jaimelesmineurs";
	const SESSION_KEY = "intranet_auth_ok_v2";
	// si déjà connecté, redirige vers index
	if(sessionStorage.getItem(SESSION_KEY) === "1"){
		window.location.href = "../../index.html";
	}
	document.getElementById("submit").addEventListener("click", ()=>{
		const user = document.getElementById("user").value.trim();
		const pwd = document.getElementById("pwd").value;
		const msg = document.getElementById("msg");
		msg.textContent = "";
		if(user===ALLOWED_LOGIN && pwd===ALLOWED_PASSWORD){
			sessionStorage.setItem(SESSION_KEY,"1");
			window.location.href = "../../index.html";
		}else{
			msg.textContent = "Identifiant ou mot de passe incorrect.";
		}
	});
	// Enter pour soumettre
	[document.getElementById("user"), document.getElementById("pwd")].forEach(el=>{
		el.addEventListener("keydown",e=>{
			if(e.key==="Enter") document.getElementById("submit").click();
		});
	});
</script>
</body>
</html>
